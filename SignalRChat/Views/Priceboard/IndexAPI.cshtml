@{
    ViewBag.Title = "Priceboard Use API";
}
<div class="container">
    <section class="panel panel-default">
        <div class="panel-heading">
            <strong>API Broadcast Manager</strong>
        </div>
        <section class="panel-body">
            <form class="form-inline">
                <div class="form-group">
                    <label>Client ID</label>
                    <input class="form-control" type="text" id="connectionId" disabled="disabled" />
                </div>
                <div class="form-group">
                    <label>Channel</label>
                    <input class="form-control" type="text" id="txt-channel" disabled="disabled" value="HSX" />
                </div>
            </form>
            <div style="padding:15px 0px;" id="preview">

            </div>
        </section>
    </section>
</div>

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="http://localhost:62989/Scripts/jquery.signalR-2.2.1.js"></script>
    <!--<script src="~/Scripts/signalR/jquery.signalR-2.2.1.js"></script>-->
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="http://localhost:62989/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        function preview(message) {
            var $pre = $('<pre/>');
            $pre.html(message);

            $('#preview').append($pre);
        }
        $(function () {
            //Set the hubs URL for the connection: USE SERVICE SIGNALR
            $.connection.hub.url = "http://localhost:62989/signalr/hubs";
            // Reference the auto-generated proxy for the hub.
            var ws = $.connection.priceboard;
            // Create a function that the hub can call back to display messages.
            ws.client.receive = function (message) {
                preview(message);
            };

            //set parameters
            $.connection.hub.qs = { 'channel': 'all' };
            $.connection.hub.start().done(function () {
                //code here
                $('#connectionId').val(ws.connection.id);
            });
        });
    </script>
}